
***

# Textify

**Textify** is a command-line utility written in Go that converts a directory of source code into a single, structured text file. It is designed primarily for developers who need to provide entire codebases as context to Large Language Models (LLMs) or for archiving/documentation purposes.

## Features

*   **Project Structure Visualization**: Automatically runs `lstree` to insert a visual tree diagram at the very top of the output file.
*   **Smart Filtering**: Respects existing `.gitignore` files to exclude build artifacts, secrets, and dependencies (like `node_modules` or `.git`).
*   **Extension Whitelisting**: Optional support for `.textify-config` to only include specific file types (e.g., only `.go` and `.md` files).
*   **Binary Detection**: Automatically skips binary files (images, executables) to keep the output readable.
*   **Clean Output**: clearly separates files with headers and separators.

## Prerequisites

1.  **Go 1.18+**: To compile the tool.
2.  **lstree**: Textify expects the `lstree` command to be available in your system `$PATH` to generate the directory tree.
    *   *Note: If `lstree` is not found, the tool will still generate file contents but will print a warning and skip the tree visualization.*

## Installation

1.  Clone the repository or place the `main.go` file in a directory.
2.  Initialize the module and install dependencies:

```bash
go mod init textify
go get github.com/monochromegane/go-gitignore
go mod tidy
```

3.  Build the binary:

```bash
go build -o textify main.go
```

4.  (Optional) Move the binary to your path so you can use it globally:

```bash
mv textify /usr/local/bin/
```

## Usage

### Basic Usage
Run the tool in the current directory. This will generate a `codebase.txt` file by default.

```bash
./textify
```

### Specifying Directory and Output
You can specify a target directory to scan and a custom output filename.

```bash
# Scan the 'src' folder and save to 'project_context.txt'
./textify -d ./src -o project_context.txt
```

### Flags

| Flag | Description | Default |
| :--- | :--- | :--- |
| `-d` | The root directory to scan. | `.` (Current Directory) |
| `-o` | The output text file path. | `codebase.txt` |

---

## Configuration (.textify-config)

You can control exactly which file types are included by creating a `.textify-config` file in the root of the directory you are scanning.

If this file exists, **only** the file extensions listed inside it will be processed. If the file does not exist, Textify will include all text files that aren't ignored by `.gitignore`.

### Example `.textify-config`
Create a file named `.textify-config`:

```text
.go
.md
.yaml
Dockerfile
```

*   Lines starting with `#` are comments.
*   Extensions can be written with or without the dot (e.g., `go` or `.go`).
*   Exact filenames (like `Dockerfile`) are matched by exact name if they lack an extension logic.

---

## Output Format

The generated text file is structured as follows:

1.  **Tree View**: A visual representation of the folder structure (generated by `lstree`).
2.  **File Contents**: The content of every matched file, separated by dividers.

**Example Output:**

```text
.
├── main.go
├── go.mod
└── README.md

==================================================
FILE CONTENTS
==================================================

--------------------------------------------------
FILE: main.go
--------------------------------------------------

package main
import "fmt"
... (file content) ...


--------------------------------------------------
FILE: README.md
--------------------------------------------------

# Project Title
... (file content) ...
```

## Troubleshooting

**`Warning: could not run 'lstree'`**
Ensure that `lstree` is installed and accessible from your terminal. You can verify this by running `which lstree`.

**Binary files appearing in output?**
Textify attempts to detect binary files by checking for NUL bytes and invalid UTF-8 characters in the first 512 bytes of a file. If a specific file type is slipping through, add it to your `.gitignore` or use a `.textify-config` whitelist.
